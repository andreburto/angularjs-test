<!DOCTYPE html>
<html>
    <head>
        <title>AngularJS</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    </head>
    <body ng-app="TagTest">
        <yvonne-img-tag></yvonne-img-tag>
        <yvonne-img-tag></yvonne-img-tag>
        <script>

var app = angular.module("TagTest", []);

app.controller('yvonneImg', function($scope, $http, $sce) {
    $scope.json = "";
    
    $scope.picLoad = function() {
        $http.get('test3.php').then(function(res) { $scope.json = res.data},
                                    function(res) { $scope.code = res.statusText; });
    }
});

app.directive("yvonneImgTag", function($compile) {
    return {
            template: '<div ng-controller="yvonneImg" ng-init="picLoad()"><img src="{{json.thumb}}" ng-click="picLoad()" border="0"/></div>',
            replace: true,
        };
});

        </script>
    </body>
</html>